/*! grapesjs-plugin-ckeditor - 0.0.5 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["grapesjs-plugin-customrte"]=t():e["grapesjs-plugin-customrte"]=t()}(this,function(){return function(e){function t(n){if(o[n])return o[n].exports;var a=o[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t){"use strict";grapesjs.plugins.add("gjs-plugin-customrte",function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.setCustomRte({enable:function(o,n){if(n)return this.focus(o,n),n;o.contentEditable=!0,e.RichTextEditor.add("PlaceHolder",{command:"PlaceHolder",class:"fa fa-link",title:"PlaceHolder"});var a=e.RichTextEditor.getToolbarEl();return[].forEach.call(a.children,function(e){}),$('a[title="PlaceHolder"]').click(function(){var n=e.Modal;n.setTitle("Please Select Available Token"),n.setContent('<select id="customVariable"></select><br /><button id="sbm">submit</button>');var a=t(window.location.href);$("#customVariable").append($("<option>",{value:"",text:"Please Select"})),$.each(a.args,function(e,t){(""!=e||Object.keys(e).length>0)&&$("#customVariable").append($("<option>",{value:t,text:t}))}),n.open(),$("#sbm").on("click",function(){console.log(o),o.contentEditable=!0;var t=e.Canvas.getBody().ownerDocument,a=$("#customVariable").val();""!=a&&t.execCommand("insertText",!1,$("#customVariable").val()),n.close()})}),this.focus(o,n),n},disable:function(e,t){e.contentEditable=!1,t&&t.focusManager&&t.focusManager.blur(!0)},focus:function(e,t){t&&t.focusManager.hasFocus||(e.contentEditable=!0,t&&t.focus())}});var t=function(e){var t=document.createElement("a");t.href=e;var n={protocol:t.protocol,hostname:t.hostname,port:t.port,pathname:t.pathname,search:t.search,query:t.search.substring(1),args:o(t.search.substring(1)),hash:t.hash,host:t.host};return n},o=function(e){for(var t=e.split("&"),o={},n=0;n<t.length;n++){var a=decodeURIComponent(t[n]);if(a.indexOf("=")==-1)o[a.trim()]=!0;else{var r=a.split("=");o[r[0].trim()]=r[1].trim()}}return o}})}])});